// Use DBML to define your database structure
// Docs: https://github.com/holistics/dbml/tree/master/dbml-homepage/docs

Table User {
  id integer [primary key]
  email varchar unique
  username varchar
  first_name varchar
  last_name varchar
  is_staff bool
  is_active bool
  date_joined timestamp
  google_id varchar
  apple_id varchar
  metadata json
}

Table Token {
  token varchar [primary key]
  user_id integer
  created_at timestamp
  expires_at timestamp
  is_active bool
}

table EntranceKey {
  id integer [primary key, increment]
  code varchar(6)
  group_id integer
  uses_left integer
  created_at timestamp
  expires_at timestamp
  is_active bool
}

table Mapping {
  id integer [primary key,increment]
  name varchar
  coordinates json
  data json
  upvotes integer
  creator_id integer
} 

table Localization {
  id integer [primary key]
  tag varchar
  data json
}

table AIModel {
  version varchar [primary key]
  file_path text 
  upload_date timestamp
}

table Feedback {
  id integer [primary key, increment] 
  image_path text
  objects_data json
  user_id integer
  upload_date timestamp
  is_trusted bool
}

table RecognitionObject {
  id integer [primary key]
  tag varchar
  meta_data json
}

table Group {
  id integer [primary key]
  admin_id integer
  created_at timestamp
  metadata json
}

table GroupUser {
  user_id integer
  group_id integer
}

table Update {
  id integer [primary key]
  AI_version varchar
  mapping_id integer
  loc_id integer
}

Ref: Token.user_id > User.id

Ref: Feedback.user_id > User.id

Ref: Localization.id < Update.loc_id

Ref: Mapping.creator_id > User.id

Ref: GroupUser.user_id > User.id

Ref: GroupUser.group_id > Group.id

Ref: EntranceKey.group_id > Group.id

Ref: Update.mapping_id > Mapping.id

Ref: Update.AI_version > AIModel.version
// Ref: users.id < follows.followed_user_id
